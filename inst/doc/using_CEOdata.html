<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Xavier Fernández-i-Marín" />


<title>Using the CEOdata package</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Using the CEOdata package</h1>
<h4 class="author">Xavier Fernández-i-Marín</h4>
<h4 class="date">17/03/2022 - Version 1.0.2</h4>



<p>CEOdata is a package that facilitates the incorporation of microdata (individual responses) of public opinion polls in Catalonia into <code>R</code>, as performed by the “Centre d’Estudis d’Opinió” (CEO, Opinion Studies Center). It has basically three main functions with a separate purpose:</p>
<ul>
<li><strong><code>CEOdata()</code></strong>: that provides the <em>data</em> of the surveys directly into <code>R</code>.</li>
<li><strong><code>CEOmeta()</code></strong>: that allows the user to inspect the details of the available surveys (<em>metadata</em>) and to search for specific topics and get the survey details.</li>
<li><strong><code>CEOsearch()</code></strong>: that allows the user to search for variables, variable labels and value labels within a survey data gathered using the <code>CEOdata()</code> function.</li>
</ul>
<div id="ceodata-get-the-survey-data" class="section level1">
<h1><code>CEOdata()</code>: Get the survey data</h1>
<p>The most comprehensive kind of data on Catalan public opinion is the “Barometer”, that can be retrieved by default by the main function <code>CEOdata()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(CEOdata)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>d &lt;-<span class="st"> </span><span class="kw">CEOdata</span>()</span></code></pre></div>
<p>This provides a cleaned and merged version of all the available Barometers, since 2017, providing easy access to the following number of responses and variables:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">dim</span>(d)</span></code></pre></div>
<pre><code>## [1] 33838   814</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>d</span></code></pre></div>
<pre><code>## # A tibble: 33,838 × 814
##    PONDERA ORDRE_REVISADA   REO BOP_NUM   ANY   MES   DIA HOR_INI HOR_FIN DURADA
##      &lt;dbl&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1    1.86              1   746 Març 1…  2014     3    NA      NA      NA   1631
##  2    1.86              2   746 Març 1…  2014     3    NA      NA      NA   1972
##  3    1.86              3   746 Març 1…  2014     3    NA      NA      NA   1478
##  4    1.86              4   746 Març 1…  2014     3    NA      NA      NA    872
##  5    1.86              5   746 Març 1…  2014     3    NA      NA      NA   1356
##  6    1.86              6   746 Març 1…  2014     3    NA      NA      NA   1205
##  7    1.86              7   746 Març 1…  2014     3    NA      NA      NA   1279
##  8    1.86              8   746 Març 1…  2014     3    NA      NA      NA    995
##  9    1.86              9   746 Març 1…  2014     3    NA      NA      NA   1497
## 10    1.86             10   746 Març 1…  2014     3    NA      NA      NA   1221
## # … with 33,828 more rows, and 804 more variables: ENQUESTADOR_CODI &lt;dbl&gt;,
## #   ENQUESTADOR_SEXE &lt;fct&gt;, ENQUESTADOR_ESTUDIS &lt;fct&gt;,
## #   ENQUESTADOR_NACIONALITAT &lt;fct&gt;, PROVINCIA &lt;fct&gt;, HABITAT &lt;fct&gt;,
## #   MUNICIPI &lt;fct&gt;, COMARCA &lt;fct&gt;, ID_RUTA &lt;dbl&gt;, SECCIO_TEORICA &lt;dbl&gt;,
## #   CONF_SECC &lt;fct&gt;, SECCIO_REAL &lt;dbl&gt;, DOMICILI_PARTICULAR &lt;fct&gt;,
## #   LLENGUA_ENQUESTA &lt;fct&gt;, PADRO &lt;fct&gt;, CIUTADANIA &lt;fct&gt;, SEXE &lt;fct&gt;,
## #   EDAT &lt;dbl&gt;, EDAT_GR &lt;fct&gt;, EDAT_CEO &lt;fct&gt;, LLOC_NAIX &lt;fct&gt;, …</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="kw">names</span>(d)[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;PONDERA&quot;                  &quot;ORDRE_REVISADA&quot;          
##  [3] &quot;REO&quot;                      &quot;BOP_NUM&quot;                 
##  [5] &quot;ANY&quot;                      &quot;MES&quot;                     
##  [7] &quot;DIA&quot;                      &quot;HOR_INI&quot;                 
##  [9] &quot;HOR_FIN&quot;                  &quot;DURADA&quot;                  
## [11] &quot;ENQUESTADOR_CODI&quot;         &quot;ENQUESTADOR_SEXE&quot;        
## [13] &quot;ENQUESTADOR_ESTUDIS&quot;      &quot;ENQUESTADOR_NACIONALITAT&quot;
## [15] &quot;PROVINCIA&quot;                &quot;HABITAT&quot;                 
## [17] &quot;MUNICIPI&quot;                 &quot;COMARCA&quot;                 
## [19] &quot;ID_RUTA&quot;                  &quot;SECCIO_TEORICA&quot;          
## [21] &quot;CONF_SECC&quot;                &quot;SECCIO_REAL&quot;             
## [23] &quot;DOMICILI_PARTICULAR&quot;      &quot;LLENGUA_ENQUESTA&quot;        
## [25] &quot;PADRO&quot;                    &quot;CIUTADANIA&quot;              
## [27] &quot;SEXE&quot;                     &quot;EDAT&quot;                    
## [29] &quot;EDAT_GR&quot;                  &quot;EDAT_CEO&quot;                
## [31] &quot;LLOC_NAIX&quot;                &quot;HORA_PRIMERA_PREGUNTA&quot;   
## [33] &quot;GRAVACIO&quot;                 &quot;TIPUS_GRAV&quot;              
## [35] &quot;PRE_PROBLEMES&quot;            &quot;PROBLEMES_LITERALS&quot;      
## [37] &quot;PROBLEMES_R_1&quot;            &quot;PROBLEMES_R_2&quot;           
## [39] &quot;PROBLEMES_R_3&quot;            &quot;PROBLEMES_R_4&quot;           
## [41] &quot;PROBLEMES_R_5&quot;            &quot;PROBLEMES_R_6&quot;           
## [43] &quot;PROBLEMES_R_7&quot;            &quot;PROBLEMES_R_8&quot;           
## [45] &quot;PROBLEMES_R_9&quot;            &quot;PROBLEMES_R_10&quot;          
## [47] &quot;PROBLEMES_R_11&quot;           &quot;PROBLEMES_R_12&quot;          
## [49] &quot;PROBLEMES_E_1&quot;            &quot;PROBLEMES_E_2&quot;</code></pre>
<div id="specific-studies-or-time-frames" class="section level2">
<h2>Specific studies or time frames</h2>
<p><code>CEOdata()</code> allows you to select specific Barometers, by providing their internal register in the <code>reo</code> argument. The reo is the internal name that the CEO uses, and stands for “Registre d’Estudis d’Opinió” (register of opinion studies), and is the main identifier of the survey, also present in the table of meta data. Although many of them are numbers, some have a number, a slash and another number, and therefore a character vector must be passed. Only a single REO can be passed, as it is not guaranteed that different data matrices share any column, and may refer to very different topics.</p>
<p>For instance, to get only the data of the study with register “746” (corresponding to March 2013):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>d746 &lt;-<span class="st"> </span><span class="kw">CEOdata</span>(<span class="dt">reo =</span> <span class="st">&quot;746&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>d746</span></code></pre></div>
<pre><code>## # A tibble: 2,000 × 475
##      NUM NUM_CINE      BOP_NUM   MES   ANY   DIA CODI_ENQ HOR_INI HOR_FIN DURADA
##    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl+lb&gt; &lt;time&gt;  &lt;time&gt;   &lt;dbl&gt;
##  1    NA        1 32 [Març. 1…     4    14    NA 243 [G3]    NA      NA     1203
##  2    NA        2 32 [Març. 1…     4    14    NA 254 [T4]    NA      NA      997
##  3    NA        3 32 [Març. 1…     4    14    NA 243 [G3]    NA      NA     1127
##  4    NA        4 32 [Març. 1…     4    14    NA 235 [B5]    NA      NA     1792
##  5    NA        5 32 [Març. 1…     4    14    NA 236 [B6]    NA      NA     1418
##  6    NA        6 32 [Març. 1…     3    14    NA 246 [L1]    NA      NA     1964
##  7    NA        7 32 [Març. 1…     4    14    NA 244 [G4]    NA      NA     2283
##  8    NA        8 32 [Març. 1…     4    14    NA 233 [B3]    NA      NA     1322
##  9    NA        9 32 [Març. 1…     3    14    NA 232 [B2]    NA      NA     1778
## 10    NA       10 32 [Març. 1…     3    14    NA 254 [T4]    NA      NA     1119
## # … with 1,990 more rows, and 465 more variables: num_quest &lt;dbl&gt;,
## #   sexe_enq &lt;dbl+lbl&gt;, edat_enq &lt;dbl&gt;, estudis_enq &lt;dbl+lbl&gt;,
## #   nacionalitat_enq &lt;dbl+lbl&gt;, PROVI &lt;dbl+lbl&gt;, HABITAT &lt;dbl+lbl&gt;,
## #   MUN &lt;dbl+lbl&gt;, ADRECA &lt;chr&gt;, COMARCA &lt;dbl+lbl&gt;, SEXE &lt;dbl+lbl&gt;, EDAT &lt;dbl&gt;,
## #   SE &lt;chr&gt;, GR_EDAT &lt;dbl+lbl&gt;, Edat_CEO &lt;dbl+lbl&gt;, F01 &lt;dbl+lbl&gt;,
## #   F02 &lt;dbl+lbl&gt;, F03 &lt;dbl+lbl&gt;, F04 &lt;dbl+lbl&gt;, PRE_P1 &lt;dbl+lbl&gt;,
## #   P1_LITERALS &lt;chr&gt;, P1_100_R &lt;dbl&gt;, P1_200_R &lt;dbl&gt;, P1_300_R &lt;dbl&gt;, …</code></pre>
<p>Not all studies carried on by the CEO (and therefore listed in the <code>CEOmeta()</code> function –see below–) have microdata available. For convenience, there is a variable in the metadata that returns whether the microdata is available or not (<code>microdata_available</code>).</p>
<p>When using the <code>kind</code> argument (which is the default), the function <code>CEOdata()</code> also allows to restrict the whole set of barometers based on specific time frames defined by a date with the arguments <code>date_start</code> and <code>date_end</code> using the YYYY-MM-DD format. Notice that only the barometers are considered when using this arguments, not other studies.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>b2019 &lt;-<span class="st"> </span><span class="kw">CEOdata</span>(<span class="dt">date_start =</span> <span class="st">&quot;2019-01-01&quot;</span>, <span class="dt">date_end =</span> <span class="st">&quot;2019-12-31&quot;</span>)</span></code></pre></div>
<pre><code>## Downloading the barometer.</code></pre>
<pre><code>## Converting the original data into R. This may take a while.</code></pre>
<pre><code>## Post-processing the data. This may take a while.</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>b2019</span></code></pre></div>
<pre><code>## # A tibble: 4,500 × 814
##    PONDERA ORDRE_REVISADA   REO BOP_NUM   ANY   MES   DIA HOR_INI HOR_FIN DURADA
##      &lt;dbl&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1       1              1   919 Març 1…  2019     3    NA      NA      NA   1657
##  2       1              2   919 Març 1…  2019     3    NA      NA      NA   1680
##  3       1              3   919 Març 1…  2019     3    NA      NA      NA   1757
##  4       1              4   919 Març 1…  2019     3    NA      NA      NA   1645
##  5       1              5   919 Març 1…  2019     3    NA      NA      NA   1704
##  6       1              6   919 Març 1…  2019     3    NA      NA      NA   1645
##  7       1              7   919 Març 1…  2019     3    NA      NA      NA   6722
##  8       1              8   919 Març 1…  2019     3    NA      NA      NA   1720
##  9       1              9   919 Març 1…  2019     3    NA      NA      NA   1709
## 10       1             10   919 Març 1…  2019     3    NA      NA      NA   1929
## # … with 4,490 more rows, and 804 more variables: ENQUESTADOR_CODI &lt;dbl&gt;,
## #   ENQUESTADOR_SEXE &lt;fct&gt;, ENQUESTADOR_ESTUDIS &lt;fct&gt;,
## #   ENQUESTADOR_NACIONALITAT &lt;fct&gt;, PROVINCIA &lt;fct&gt;, HABITAT &lt;fct&gt;,
## #   MUNICIPI &lt;fct&gt;, COMARCA &lt;fct&gt;, ID_RUTA &lt;dbl&gt;, SECCIO_TEORICA &lt;dbl&gt;,
## #   CONF_SECC &lt;fct&gt;, SECCIO_REAL &lt;dbl&gt;, DOMICILI_PARTICULAR &lt;fct&gt;,
## #   LLENGUA_ENQUESTA &lt;fct&gt;, PADRO &lt;fct&gt;, CIUTADANIA &lt;fct&gt;, SEXE &lt;fct&gt;,
## #   EDAT &lt;dbl&gt;, EDAT_GR &lt;fct&gt;, EDAT_CEO &lt;fct&gt;, LLOC_NAIX &lt;fct&gt;, …</code></pre>
</div>
<div id="extra-variables" class="section level2">
<h2>Extra variables</h2>
<p>By default <code>CEOdata()</code> incorporates new variables to the original matrix. Variables that are created for convenience, such as the date of the survey. The CEO data not always provides a day of the month. In that case, 28 is used. These variables appear at the end of the dataset and can be distinguished from the original CEO variables because only the first letter is capitalized.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="kw">tail</span>(<span class="kw">names</span>(d))</span></code></pre></div>
<pre><code>## [1] &quot;CONSEQ_ECON_COVID19&quot;     &quot;ACTITUD_PERSONAL_COVD19&quot;
## [3] &quot;CIRCUIT_985_1&quot;           &quot;CIRCUIT_985_2&quot;          
## [5] &quot;CIRCUIT_985_3&quot;           &quot;Data&quot;</code></pre>
<p>In case of desiring all variable names to be lowercase, one can simply convert them with <code>tolower()</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>d.lowercase &lt;-<span class="st"> </span>d</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a><span class="kw">names</span>(d.lowercase) &lt;-<span class="st"> </span><span class="kw">tolower</span>(<span class="kw">names</span>(d.lowercase))</span></code></pre></div>
</div>
</div>
<div id="ceometa-access-to-the-metadata-of-studies-and-surveys" class="section level1">
<h1><code>CEOmeta()</code>: Access to the metadata of studies and surveys</h1>
<p>The function <code>CEOmeta</code> allows to easily retrieve, search and restrict by time the list of all the surveys produced by the CEO, which amounts to more than a thousand as of early 2022.</p>
<p>When called alone, the function downloads the latest version of the metadata published by the center, in a transparent way, and caching its content so that any subsequent calls in the same <code>R</code> session do not need to download it again.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1,152 × 28
##    REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de reco…
##    &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;           
##  1 1006  Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  2 1005  Enquesta sobre el … Enquesta sobre e… quantitativa     telèfon         
##  3 1004  Baròmetre sanitari… Baròmetre sanita… quantitativa     telèfon         
##  4 1003  L&#39;ètica pública a … L&#39;ètica pública … quantitativa     autoadministrada
##  5 1002  Enquesta de satisf… Enquesta de sati… quantitativa     autoadministrada
##  6 1001  Índex de satisfacc… Índex de satisfa… quantitativa     internet;telèfon
##  7 1000  Enquesta panel sob… Enquesta panel s… quantitativa     internet        
##  8 999   Enquesta d&#39;inserci… Enquesta d&#39;inser… quantitativa     telèfon         
##  9 998   Hàbits de consum d… Hàbits de consum… quantitativa     telèfon         
## 10 997   Hàbits de consum d… Hàbits de consum… quantitativa     telèfon         
## # … with 1,142 more rows, and 23 more variables: Objectius &lt;chr&gt;,
## #   Ambit territorial &lt;fct&gt;, Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;,
## #   Executors enquesta &lt;chr&gt;, Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
<div id="get-a-specific-study" class="section level2">
<h2>Get a specific study</h2>
<p>In order to get the metadata of a specific study, the <code>reo</code> argument can be used:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">reo =</span> <span class="st">&quot;746&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 28
##   REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de recol…
##   &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;            
## 1 746   Baròmetre d&#39;Opinió… Baròmetre d&#39;Opin… quantitativa     presencial       
## # … with 23 more variables: Objectius &lt;chr&gt;, Ambit territorial &lt;fct&gt;,
## #   Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;, Executors enquesta &lt;chr&gt;,
## #   Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
</div>
<div id="search-for-specific-topics-though-keywords" class="section level2">
<h2>Search for specific topics though keywords</h2>
<p>The first relevant argument for <code>CEOmeta()</code> is <code>search</code>, which is a built-in simple search engine that goes through the columns of the metadata containing potential descriptive information (title, summary, objectives and tags -descriptors-) and returns the studies that contain such keyword.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">search =</span> <span class="st">&quot;Medi ambient&quot;</span>)</span></code></pre></div>
<pre><code>## Looking for entries with: medi ambient</code></pre>
<pre><code>## # A tibble: 45 × 28
##    REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de reco…
##    &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;           
##  1 1006  Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  2 973   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  3 941   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  4 876   Baròmetre de la bi… Baròmetre de la … quantitativa     internet;telèfon
##  5 875   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  6 865   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  7 819   Baròmetre 2015 de … Baròmetre 2015 d… quantitativa     telèfon         
##  8 807   Seguiment d&#39;Indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  9 805   Baròmetre de la bi… Baròmetre de la … quantitativa     internet;telèfon
## 10 803   Post test campanya… Post test campan… quantitativa     telèfon         
## # … with 35 more rows, and 23 more variables: Objectius &lt;chr&gt;,
## #   Ambit territorial &lt;fct&gt;, Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;,
## #   Executors enquesta &lt;chr&gt;, Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
<p>It is also possible to pass more than one value to <code>search</code>, so that the search includes them (either one of them OR any other).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">search =</span> <span class="kw">c</span>(<span class="st">&quot;Medi ambient&quot;</span>, <span class="st">&quot;Municipi&quot;</span>))</span></code></pre></div>
<pre><code>## Looking for entries with: medi ambient OR municipi</code></pre>
<pre><code>## # A tibble: 49 × 28
##    REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de reco…
##    &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;           
##  1 1006  Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  2 973   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  3 941   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  4 876   Baròmetre de la bi… Baròmetre de la … quantitativa     internet;telèfon
##  5 875   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  6 865   Seguiment d&#39;indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  7 819   Baròmetre 2015 de … Baròmetre 2015 d… quantitativa     telèfon         
##  8 807   Seguiment d&#39;Indica… Seguiment d&#39;indi… quantitativa     telèfon         
##  9 805   Baròmetre de la bi… Baròmetre de la … quantitativa     internet;telèfon
## 10 803   Post test campanya… Post test campan… quantitativa     telèfon         
## # … with 39 more rows, and 23 more variables: Objectius &lt;chr&gt;,
## #   Ambit territorial &lt;fct&gt;, Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;,
## #   Executors enquesta &lt;chr&gt;, Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
<p>In addition to the built-in argument to search through the columns of the survey title, the study title, the objectives, the summary and the tags (descriptors), it is possible to combine <code>CEOmeta()</code> with <code>dplyr</code>’s <code>filter()</code> to limit the results of studies returned.</p>
<p>For example, to get the studies that have been performed using Internet to get the data:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>() <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Metode de recollida de dades</span><span class="st">`</span> <span class="op">==</span><span class="st"> &quot;internet&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 36 × 28
##    REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de reco…
##    &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;           
##  1 1000  Enquesta panel sob… Enquesta panel s… quantitativa     internet        
##  2 995   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
##  3 993   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
##  4 989   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
##  5 969   Estudi de percepci… Estudi de percep… quantitativa     internet        
##  6 968   Estudi de percepci… Estudi de percep… quantitativa     internet        
##  7 966   Enquesta sobre els… Enquesta sobre e… quantitativa     internet        
##  8 965   Enquesta sobre l&#39;i… Enquesta sobre l… quantitativa     internet        
##  9 961   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
## 10 953   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
## # … with 26 more rows, and 23 more variables: Objectius &lt;chr&gt;,
## #   Ambit territorial &lt;fct&gt;, Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;,
## #   Executors enquesta &lt;chr&gt;, Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
<p>Or to get studies with a specific quantitative sample size limit:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>() <span class="op">|</span><span class="er">&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Mostra estudis quantitatius</span><span class="st">`</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span>)</span></code></pre></div>
<pre><code>## # A tibble: 170 × 28
##    REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de reco…
##    &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;           
##  1 990   IPLAENSA Opinió i … IPLAENSA Opinió … quantitativa     telèfon         
##  2 989   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
##  3 984   iPLAENSA Satisfacc… iPLAENSA Satisfa… quantitativa     telèfon         
##  4 983   iPLAENSA: Satisfac… iPLAENSA: Satisf… quantitativa     telèfon         
##  5 964   Enquesta satisfacc… Enquesta satisfa… quantitativa     autoadministrada
##  6 963   Enquesta satisfacc… Enquesta satisfa… quantitativa     autoadministrada
##  7 957   Avaluació del grau… Avaluació del gr… quantitativa     presencial      
##  8 950   Enquesta de satisf… Enquesta de sati… quantitativa     telèfon         
##  9 933   iPLAENSA: Enquesta… iPLAENSA: Enques… quantitativa     telèfon         
## 10 930   iPLAENSA: Satisfac… iPLAENSA: Satisf… quantitativa     telèfon         
## # … with 160 more rows, and 23 more variables: Objectius &lt;chr&gt;,
## #   Ambit territorial &lt;fct&gt;, Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;,
## #   Executors enquesta &lt;chr&gt;, Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
</div>
<div id="restrict-by-time" class="section level2">
<h2>Restrict by time</h2>
<p>Metadata can be retrieved for a specific period of time, by using the arguments <code>date_start</code> and <code>date_end</code>, also using the YYYY-MM-DD format. In this case the dates that are taken into account are dates where the study gets into the records, not the fieldwork dates.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">date_start =</span> <span class="st">&quot;2019-01-01&quot;</span>, <span class="dt">date_end =</span> <span class="st">&quot;2019-12-31&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 45 × 28
##    REO   `Titol enquesta`    `Titol estudi`    `Metodologia en… `Metode de reco…
##    &lt;fct&gt; &lt;chr&gt;               &lt;chr&gt;             &lt;fct&gt;            &lt;fct&gt;           
##  1 954   Baròmetre d&#39;Opinió… Baròmetre d&#39;Opin… quantitativa     presencial      
##  2 953   Enquesta de satisf… Enquesta de sati… quantitativa     internet        
##  3 952   Percepció sobre el… Percepció sobre … quantitativa     presencial      
##  4 951   Cosmopolitisme i l… Cosmopolitisme i… quantitativa     presencial      
##  5 950   Enquesta de satisf… Enquesta de sati… quantitativa     telèfon         
##  6 949   Enquesta sobre civ… Enquesta sobre c… quantitativa     internet;presen…
##  7 948   Enquesta sobre el … Enquesta sobre e… quantitativa     telèfon         
##  8 947   Baròmetre sanitari… Baròmetre sanita… quantitativa     telèfon         
##  9 946   Òmnibus de la Gene… Òmnibus de la Ge… quantitativa     presencial      
## 10 945   Baròmetre de satis… Baròmetre de sat… quantitativa     internet        
## # … with 35 more rows, and 23 more variables: Objectius &lt;chr&gt;,
## #   Ambit territorial &lt;fct&gt;, Cost &lt;dbl&gt;, Promotors enquesta &lt;chr&gt;,
## #   Executors enquesta &lt;chr&gt;, Promotors estudi &lt;chr&gt;, Executors estudi &lt;chr&gt;,
## #   Data de treball de camp &lt;chr&gt;, Dia inici treball de camp &lt;date&gt;,
## #   Dia final treball de camp &lt;date&gt;, Univers &lt;chr&gt;, Mostra &lt;chr&gt;,
## #   Mostra estudis quantitatius &lt;dbl&gt;, Mostra estudis qualitatius &lt;chr&gt;,
## #   Error mostral &lt;chr&gt;, Error mostral (numèric) &lt;chr&gt;, Resum &lt;chr&gt;, …</code></pre>
</div>
<div id="browse-the-ceo-site" class="section level2">
<h2>Browse the CEO site</h2>
<p>In addition, to the search engine and the restriction by time <code>CEOmeta()</code> also allows to automatically open the relevant URLs at the CEO domain that contain the details of the studies gathered with the function. This can be done setting the <code>browse</code> argument to <code>TRUE</code>. However, there is a soft limitation of only 10 URLs to be opened, unless the user forces to really open all of them (proceed with caution, as this may open many tabs in your browser and leave your computer out of RAM in some scenarios of RAM black holes, such as Chrome).</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">search =</span> <span class="st">&quot;Medi ambient a&quot;</span>, <span class="dt">browse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>To open a specific REO, a simpler call with its specific identifier can be used:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">reo =</span> <span class="st">&quot;746&quot;</span>, <span class="dt">browse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>It is also possible to specify an alternative language, so the default Catalan pages are substituted by the automatic translations provided by Apertium (for Occitan/Aranese) or Google Translate.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true"></a><span class="kw">CEOmeta</span>(<span class="dt">search =</span> <span class="st">&quot;Medi ambient a&quot;</span>, <span class="dt">browse =</span> <span class="ot">TRUE</span>, <span class="dt">browse_translate =</span> <span class="st">&quot;de&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="ceosearch-access-to-the-variable-and-value-labels" class="section level1">
<h1><code>CEOsearch()</code>: Access to the variable and value labels</h1>
<p>Contrary to <code>CEOdata()</code> and <code>CEOmeta()</code>, <code>CEOsearch()</code> needs at least one argument: the survey data (microdata) for which we want to extract the variable labels and the value labels. By default it provides the variable labels in a tidy object:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true"></a><span class="kw">CEOsearch</span>(d)  <span class="co"># equivalent to CEOsearch(d, where = &quot;variables&quot;)</span></span></code></pre></div>
<pre><code>## # A tibble: 814 × 2
##    Variable       Label                                                  
##    &lt;chr&gt;          &lt;chr&gt;                                                  
##  1 PONDERA        Coeficients de ponderació                              
##  2 ORDRE_REVISADA Número d&#39;ordre de registre original                    
##  3 REO            Número de registre                                     
##  4 BOP_NUM        Número d&#39;ordre del baròmetre                           
##  5 ANY            Any de realització del baròmetre                       
##  6 MES            Mes de realització del baròmetre                       
##  7 DIA            Dia (variable anonimitzada)                            
##  8 HOR_INI        Hora de inicio de la entrevista (variable anonimitzada)
##  9 HOR_FIN        Hora de fin de la entrevista (variable anonimitzada)   
## 10 DURADA         Durada de l&#39;entrevista en segons                       
## # … with 804 more rows</code></pre>
<p>Equivalently, the use of <code>where = &quot;values&quot;</code> provides with a tidy object containing the value labels. Notice that in this case the variable names are repeated to accommodate each of the different value labels.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a><span class="kw">CEOsearch</span>(d, <span class="dt">where =</span> <span class="st">&quot;values&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10,263 × 2
##    Variable Value        
##    &lt;fct&gt;    &lt;fct&gt;        
##  1 BOP_NUM  Març 14 - 746
##  2 BOP_NUM  Oct. 14 -758 
##  3 BOP_NUM  Feb 15 -774  
##  4 BOP_NUM  Juny 15 -795 
##  5 BOP_NUM  Oct. 15 -804 
##  6 BOP_NUM  Feb. 16 -816 
##  7 BOP_NUM  Juny 16 -826 
##  8 BOP_NUM  Oct. 16 -835 
##  9 BOP_NUM  Març 17 -850 
## 10 BOP_NUM  Juny 17 -857 
## # … with 10,253 more rows</code></pre>
<p>Just like with the <code>CEOmeta()</code>, <code>CEOsearch()</code> has a simple built-in search facility that allows to retrieve only the rows that match a specific keyword(s). In the following example, we restrict the variables to those that contain “edat” (age).</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a><span class="kw">CEOsearch</span>(d, <span class="dt">keyword =</span> <span class="st">&quot;edat&quot;</span>)</span></code></pre></div>
<pre><code>## Looking for entries with: edat</code></pre>
<pre><code>## # A tibble: 14 × 2
##    Variable            Label                                                    
##    &lt;chr&gt;               &lt;chr&gt;                                                    
##  1 EDAT                Edat                                                     
##  2 EDAT_GR             Grups d&#39;edat                                             
##  3 EDAT_CEO            Grups d&#39;edat reagrupada (recodificació grups de 5 anys)  
##  4 CRISI_ATUR_FAMILIAR En els últims dos anys, com a conseqüència de la crisi, …
##  5 EDAT_1              Edat. Persona 1 (variable anonimitzada)                  
##  6 EDAT_2              Edat. Persona 2 (variable anonimitzada)                  
##  7 EDAT_3              Edat. Persona 3 (variable anonimitzada)                  
##  8 EDAT_4              Edat. Persona 4 (variable anonimitzada)                  
##  9 EDAT_5              Edat. Persona 5 (variable anonimitzada)                  
## 10 EDAT_6              Edat. Persona 6 (variable anonimitzada)                  
## 11 EDAT_7              Edat. Persona 7 (variable anonimitzada)                  
## 12 EDAT_8              Edat. Persona 8 (variable anonimitzada)                  
## 13 EDAT_9              Edat. Persona 9 (variable anonimitzada)                  
## 14 EDAT_10             Edat. Persona 10 (variable anonimitzada)</code></pre>
<p>Finally, an English translation of the variable labels/values is provided if the argument <code>translate</code> is set to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true"></a><span class="kw">CEOsearch</span>(d, <span class="dt">keyword =</span> <span class="st">&quot;edat&quot;</span>, <span class="dt">translate =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## Looking for entries with: edat</code></pre>
<pre><code>## # A tibble: 14 × 2
##    Variable            Label                                                    
##    &lt;chr&gt;               &lt;chr&gt;                                                    
##  1 EDAT                Edat                                                     
##  2 EDAT_GR             Grups d&#39;edat                                             
##  3 EDAT_CEO            Grups d&#39;edat reagrupada (recodificació grups de 5 anys)  
##  4 CRISI_ATUR_FAMILIAR En els últims dos anys, com a conseqüència de la crisi, …
##  5 EDAT_1              Edat. Persona 1 (variable anonimitzada)                  
##  6 EDAT_2              Edat. Persona 2 (variable anonimitzada)                  
##  7 EDAT_3              Edat. Persona 3 (variable anonimitzada)                  
##  8 EDAT_4              Edat. Persona 4 (variable anonimitzada)                  
##  9 EDAT_5              Edat. Persona 5 (variable anonimitzada)                  
## 10 EDAT_6              Edat. Persona 6 (variable anonimitzada)                  
## 11 EDAT_7              Edat. Persona 7 (variable anonimitzada)                  
## 12 EDAT_8              Edat. Persona 8 (variable anonimitzada)                  
## 13 EDAT_9              Edat. Persona 9 (variable anonimitzada)                  
## 14 EDAT_10             Edat. Persona 10 (variable anonimitzada)</code></pre>
<p>Of course, variable labels and values can be merged into a single object using a combination of <code>join</code> and <code>CEOsearch()</code>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true"></a><span class="kw">CEOsearch</span>(d) <span class="op">|</span><span class="er">&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">CEOsearch</span>(d, <span class="dt">where =</span> <span class="st">&quot;values&quot;</span>))</span></code></pre></div>
<pre><code>## Joining, by = &quot;Variable&quot;</code></pre>
<pre><code>## # A tibble: 10,328 × 3
##    Variable       Label                               Value        
##    &lt;chr&gt;          &lt;chr&gt;                               &lt;fct&gt;        
##  1 PONDERA        Coeficients de ponderació           &lt;NA&gt;         
##  2 ORDRE_REVISADA Número d&#39;ordre de registre original &lt;NA&gt;         
##  3 REO            Número de registre                  &lt;NA&gt;         
##  4 BOP_NUM        Número d&#39;ordre del baròmetre        Març 14 - 746
##  5 BOP_NUM        Número d&#39;ordre del baròmetre        Oct. 14 -758 
##  6 BOP_NUM        Número d&#39;ordre del baròmetre        Feb 15 -774  
##  7 BOP_NUM        Número d&#39;ordre del baròmetre        Juny 15 -795 
##  8 BOP_NUM        Número d&#39;ordre del baròmetre        Oct. 15 -804 
##  9 BOP_NUM        Número d&#39;ordre del baròmetre        Feb. 16 -816 
## 10 BOP_NUM        Número d&#39;ordre del baròmetre        Juny 16 -826 
## # … with 10,318 more rows</code></pre>
</div>
<div id="development-and-acknowledgement" class="section level1">
<h1>Development and acknowledgement</h1>
<p>The development of <code>CEOdata</code> (track changes, propose improvements, report bugs) can be followed at <a href="https://github.com/ceopinio/CEOdata/">github</a>.</p>
<p>If using the data and the package, please cite and acknowledge properly the CEO and the package, respectively.</p>
<!-- # References -->
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
